---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Hero from '../../components/Hero.astro';
import FeatureGrid from '../../components/FeatureGrid.astro';
import CTASection from '../../components/CTASection.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const locations = await getCollection('locations');
  return locations.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

// Extract city name from slug or title
const cityName = entry.data.city || entry.slug.replace(/-web-design|-nc/g, '').replace(/-/g, ' ')
  .split(' ')
  .map(word => word.charAt(0).toUpperCase() + word.slice(1))
  .join(' ');

const pageTitle = entry.data.title || `${cityName} Web Design & SEO | Beach Bird Studios`;
const pageDescription = entry.data.description || `Professional web design and SEO services in ${cityName}, NC. Custom websites, AI development, and proven SEO strategies for local businesses.`;

// Features for location pages
const locationFeatures = [
  {
    icon: 'map-pin',
    title: `Local ${cityName} Expertise`,
    description: `We understand the ${cityName} market and what local customers are searching for online.`,
    iconColor: 'blue'
  },
  {
    icon: 'zap',
    title: 'Fast Turnaround',
    description: 'Get your website live in weeks, not months. Your business can\'t afford to wait.',
    iconColor: 'yellow'
  },
  {
    icon: 'trending-up',
    title: 'Proven Results',
    description: `Help ${cityName} businesses rank higher, get more traffic, and convert more customers.`,
    iconColor: 'green'
  },
  {
    icon: 'shield-check',
    title: 'Reliable Support',
    description: 'Local support you can count on. We\'re here when you need us.',
    iconColor: 'cyan'
  },
  {
    icon: 'palette',
    title: 'Custom Design',
    description: 'Unique designs that make your business stand out from competitors.',
    iconColor: 'purple'
  },
  {
    icon: 'search',
    title: 'SEO Included',
    description: 'Every website comes with SEO optimization to help you rank locally.',
    iconColor: 'orange'
  }
];
---

<Layout 
  title={pageTitle} 
  description={pageDescription}
  structuredDataType="WebPage"
  structuredData={{
    breadcrumb: [
      { name: 'Home', url: '/' },
      { name: 'Locations', url: '/locations' },
      { name: cityName, url: `/locations/${entry.slug}` }
    ]
  }}
>
  <Header />
  
  <!-- Hero Section -->
  <Hero
    headline={`${cityName} Web Design & SEO Services`}
    subheadline={`Looking for professional web design in ${cityName}? We create stunning websites that convert visitors into customers.`}
    primaryCTA={{ text: 'Get Your Free Consultation', href: '/contact' }}
    secondaryCTA={{ text: 'View Our Services', href: '/services' }}
  />
  
  <main>
    <!-- Introduction Section -->
    <section class="section-padding bg-white">
      <div class="container-width">
        <div class="max-w-3xl mx-auto text-center">
          <h2 class="text-3xl sm:text-4xl font-chillax font-bold text-gray-900 mb-6">
            Your Local {cityName} Web Design Partner
          </h2>
          <p class="text-lg text-gray-600 mb-8">
            Beach Bird Studios specializes in creating beautiful, fast websites for {cityName} businesses. 
            Whether you need a simple site or a comprehensive 100+ page web presence, we deliver results 
            that help you dominate local search results.
          </p>
        </div>
      </div>
    </section>
    
    <!-- Features Grid -->
    <section class="section-padding bg-gray-50">
      <div class="container-width">
        <div class="text-center mb-12">
          <h2 class="text-3xl sm:text-4xl font-chillax font-bold text-gray-900 mb-4">
            Why {cityName} Businesses Choose Us
          </h2>
          <p class="text-lg text-gray-600 max-w-3xl mx-auto">
            We combine local market knowledge with proven web design and SEO strategies.
          </p>
        </div>
        
        <FeatureGrid features={locationFeatures} columns={3} variant="cards" />
      </div>
    </section>
    
    <!-- Content from Markdown -->
    <section class="section-padding bg-white">
      <div class="container-width">
        <div class="prose prose-lg max-w-none">
          <Content />
        </div>
      </div>
    </section>
    
    <!-- Services CTA -->
    <section class="section-padding section-sand">
      <div class="container-width">
        <div class="text-center mb-12">
          <h2 class="text-3xl sm:text-4xl font-chillax font-bold text-gray-900 mb-4">
            Our Services for {cityName} Businesses
          </h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          <a href="/services/custom-website-design" class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
            <div class="w-12 h-12 bg-beach-blue/10 rounded-lg flex items-center justify-center mb-4">
              <i data-lucide="palette" class="w-6 h-6 text-beach-blue"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Custom Web Design</h3>
            <p class="text-gray-600 mb-4">Beautiful, fast websites built specifically for your business.</p>
            <span class="text-beach-blue font-semibold">Learn More →</span>
          </a>
          
          <a href="/services/ai-website-development" class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
            <div class="w-12 h-12 bg-beach-blue/10 rounded-lg flex items-center justify-center mb-4">
              <i data-lucide="cpu" class="w-6 h-6 text-beach-blue"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">AI Website Development</h3>
            <p class="text-gray-600 mb-4">100+ page websites to dominate search results.</p>
            <span class="text-beach-blue font-semibold">Learn More →</span>
          </a>
          
          <a href="/services/seo-services" class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
            <div class="w-12 h-12 bg-beach-blue/10 rounded-lg flex items-center justify-center mb-4">
              <i data-lucide="search" class="w-6 h-6 text-beach-blue"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">SEO Services</h3>
            <p class="text-gray-600 mb-4">Optimize your existing website for better rankings.</p>
            <span class="text-beach-blue font-semibold">Learn More →</span>
          </a>
        </div>
      </div>
    </section>
    
    <!-- Final CTA -->
    <CTASection
      headline={`Ready to Grow Your ${cityName} Business Online?`}
      description="Let's create a website that actually works for your business. Get started with a free consultation."
      primaryCTA={{ text: 'Get Your Free Consultation', href: '/contact' }}
      secondaryCTA={{ text: 'Call 910-512-6990', href: 'tel:910-512-6990' }}
      variant="gradient"
    />
  </main>
  
  <Footer />
</Layout>